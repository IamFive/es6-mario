!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=92)}([function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";e.__esModule=!0;var r,i=n(119),o=(r=i)&&r.__esModule?r:{default:r};e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o.default)(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},function(t,e){var n=t.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(5),i=n(2),o=n(14),u=n(15),a=function(t,e,n){var s,f,c,l=t&a.F,d=t&a.G,h=t&a.S,p=t&a.P,v=t&a.B,y=t&a.W,_=d?i:i[e]||(i[e]={}),m=_.prototype,b=d?r:h?r[e]:(r[e]||{}).prototype;for(s in d&&(n=e),n)(f=!l&&b&&void 0!==b[s])&&s in _||(c=f?b[s]:n[s],_[s]=d&&"function"!=typeof b[s]?n[s]:v&&f?o(c,r):y&&b[s]==c?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(c):p&&"function"==typeof c?o(Function.call,c):c,p&&((_.virtual||(_.virtual={}))[s]=c,t&a.R&&m&&!m[s]&&u(m,s,c)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},function(t,e,n){var r=n(45)("wks"),i=n(34),o=n(5).Symbol,u="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=u&&o[t]||(u?o:i)("Symbol."+t))}).store=r},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Trait=e.Sides=void 0;var r=s(n(0)),i=s(n(1)),o=s(n(52)),u=n(37),a=s(n(129));function s(t){return t&&t.__esModule?t:{default:t}}e.Sides={LEFT:(0,o.default)("left"),RIGHT:(0,o.default)("right"),BOTTOM:(0,o.default)("bottom"),TOP:(0,o.default)("top")},e.Trait=function(){function t(e){(0,r.default)(this,t),this.NAME=e,this.tasks=[]}return(0,i.default)(t,[{key:"finalize",value:function(){this.tasks.forEach(function(t){return t()}),this.tasks.length=0}},{key:"queue",value:function(t){this.tasks.push(t)}},{key:"collides",value:function(t,e){}},{key:"obstruct",value:function(){}},{key:"update",value:function(){}}]),t}();var f=function(){function t(){(0,r.default)(this,t),this.canCollides=!0,this.pos=new u.Vec2(0,0),this.vel=new u.Vec2(0,0),this.size=new u.Vec2(0,0),this.offset=new u.Vec2(0,0),this.bounds=new a.default(this.pos,this.size,this.offset),this.lifeTime=0,this.traits=[]}return(0,i.default)(t,[{key:"addTrait",value:function(t){this.traits.push(t),this[t.NAME]=t}},{key:"finalize",value:function(){this.traits.forEach(function(t){t.finalize()})}},{key:"collides",value:function(t){var e=this;this.traits.forEach(function(n){n.collides(e,t)})}},{key:"obstruct",value:function(t,e){var n=this;this.traits.forEach(function(r){r.obstruct(n,t,e)})}},{key:"draw",value:function(){}},{key:"update",value:function(t,e){var n=this;this.traits.forEach(function(r){r.update(n,t,e)}),this.lifeTime+=t}}]),t}();e.default=f},function(t,e,n){var r=n(9),i=n(63),o=n(42),u=Object.defineProperty;e.f=n(10)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return u(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var r=n(8);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){t.exports=!n(18)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){t.exports={default:n(131),__esModule:!0}},function(t,e,n){"use strict";e.__esModule=!0;var r,i=n(82),o=(r=i)&&r.__esModule?r:{default:r};e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,o.default)(e))&&"function"!=typeof e?t:e}},function(t,e,n){"use strict";e.__esModule=!0;var r=u(n(136)),i=u(n(140)),o=u(n(82));function u(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,o.default)(e)));t.prototype=(0,i.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(r.default?(0,r.default)(t,e):t.__proto__=e)}},function(t,e,n){var r=n(23);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(7),i=n(24);t.exports=n(10)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){"use strict";var r=n(98)(!0);n(40)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports={}},function(t,e,n){var r=n(66),i=n(39);t.exports=function(t){return r(i(t))}},function(t,e,n){n(103);for(var r=n(5),i=n(15),o=n(19),u=n(4)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),s=0;s<a.length;s++){var f=a[s],c=r[f],l=c&&c.prototype;l&&!l[u]&&i(l,u,f),o[f]=o.Array}},function(t,e,n){t.exports={default:n(97),__esModule:!0}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(7).f,i=n(17),o=n(4)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){var r=n(14),i=n(70),o=n(71),u=n(9),a=n(33),s=n(48),f={},c={};(e=t.exports=function(t,e,n,l,d){var h,p,v,y,_=d?function(){return t}:s(t),m=r(n,l,e?2:1),b=0;if("function"!=typeof _)throw TypeError(t+" is not iterable!");if(o(_)){for(h=a(t.length);h>b;b++)if((y=e?m(u(p=t[b])[0],p[1]):m(t[b]))===f||y===c)return y}else for(v=_.call(t);!(p=v.next()).done;)if((y=i(v,m,p.value,e))===f||y===c)return y}).BREAK=f,e.RETURN=c},function(t,e,n){"use strict";e.__esModule=!0;var r=o(n(110)),i=o(n(51));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(){return function(t,e){if(Array.isArray(t))return t;if((0,r.default)(Object(t)))return function(t,e){var n=[],r=!0,o=!1,u=void 0;try{for(var a,s=(0,i.default)(t);!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,u=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw u}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s(n(89)),i=s(n(28)),o=s(n(22));e.loadImage=f,e.loadJSON=c,e.loadSpriteSheet=function(t){return c("/assets/sprites/"+t+".json").then(function(t){return o.default.all([t,f(t.imageURL)])}).then(function(t){var e=(0,i.default)(t,2),n=e[0],o=e[1],s=new u.default(o,n.tileW,n.tileH);return n.tiles&&n.tiles.forEach(function(t){s.defineTile.apply(s,[t.name].concat((0,r.default)(t.index)))}),n.frames&&n.frames.forEach(function(t){s.define.apply(s,[t.name].concat((0,r.default)(t.rect)))}),n.animations&&n.animations.forEach(function(t){var e=(0,a.createAnim)(t.frames,t.frameLen);s.defineAnim(t.name,e)}),s})};var u=s(n(90)),a=n(167);function s(t){return t&&t.__esModule?t:{default:t}}function f(t){return new o.default(function(e){var n=new Image;n.addEventListener("load",function(){e(n)}),n.src=t})}function c(t){return fetch(t).then(function(t){return t.json()})}},function(t,e){},function(t,e){t.exports=!0},function(t,e,n){var r=n(9),i=n(100),o=n(46),u=n(44)("IE_PROTO"),a=function(){},s=function(){var t,e=n(41)("iframe"),r=o.length;for(e.style.display="none",n(67).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),s=t.F;r--;)delete s.prototype[o[r]];return s()};t.exports=Object.create||function(t,e){var n;return null!==t?(a.prototype=r(t),n=new a,a.prototype=null,n[u]=t):n=s(),void 0===e?n:i(n,e)}},function(t,e,n){var r=n(38),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(39);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r=n(25),i=n(4)("toStringTag"),o="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,u;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:o?r(e):"Object"==(u=r(e))&&"function"==typeof e.callee?"Arguments":u}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Vec2=e.Matrix=void 0;var r=o(n(0)),i=o(n(1));function o(t){return t&&t.__esModule?t:{default:t}}e.Matrix=function(){function t(){(0,r.default)(this,t),this.grid=[]}return(0,i.default)(t,[{key:"forEach",value:function(t){this.grid.forEach(function(e,n){e.forEach(function(e,r){t(e,n,r)})})}},{key:"get",value:function(t,e){var n=this.grid[t];if(n)return n[e]}},{key:"set",value:function(t,e,n){this.grid[t]||(this.grid[t]=[]),this.grid[t][e]=n}}]),t}(),e.Vec2=function(){function t(e,n){(0,r.default)(this,t),this.set(e,n)}return(0,i.default)(t,[{key:"set",value:function(t,e){this.x=t,this.y=e}}]),t}()},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){"use strict";var r=n(31),i=n(3),o=n(64),u=n(15),a=n(17),s=n(19),f=n(99),c=n(26),l=n(68),d=n(4)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,n,v,y,_,m){f(n,e,v);var b,g,w,x=function(t){if(!h&&t in O)return O[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},k=e+" Iterator",S="values"==y,M=!1,O=t.prototype,T=O[d]||O["@@iterator"]||y&&O[y],E=!h&&T||x(y),P=y?S?x("entries"):E:void 0,j="Array"==e&&O.entries||T;if(j&&(w=l(j.call(new t)))!==Object.prototype&&w.next&&(c(w,k,!0),r||a(w,d)||u(w,d,p)),S&&T&&"values"!==T.name&&(M=!0,E=function(){return T.call(this)}),r&&!m||!h&&!M&&O[d]||u(O,d,E),s[e]=E,s[k]=p,y)if(b={values:S?E:x("values"),keys:_?E:x("keys"),entries:P},m)for(g in b)g in O||o(O,g,b[g]);else i(i.P+i.F*(h||M),e,b);return b}},function(t,e,n){var r=n(8),i=n(5).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){var r=n(8);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(65),i=n(46);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(45)("keys"),i=n(34);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e,n){var r=n(5),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(36),i=n(4)("iterator"),o=n(19);t.exports=n(2).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,e,n){"use strict";var r=n(23);t.exports.f=function(t){return new function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=r(e),this.reject=r(n)}(t)}},function(t,e,n){var r=n(15);t.exports=function(t,e,n){for(var i in e)n&&t[i]?t[i]=e[i]:r(t,i,e[i]);return t}},function(t,e,n){t.exports={default:n(113),__esModule:!0}},function(t,e,n){t.exports={default:n(123),__esModule:!0}},function(t,e,n){var r=n(34)("meta"),i=n(8),o=n(17),u=n(7).f,a=0,s=Object.isExtensible||function(){return!0},f=!n(18)(function(){return s(Object.preventExtensions({}))}),c=function(t){u(t,r,{value:{i:"O"+ ++a,w:{}}})},l=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!s(t))return"F";if(!e)return"E";c(t)}return t[r].i},getWeak:function(t,e){if(!o(t,r)){if(!s(t))return!0;if(!e)return!1;c(t)}return t[r].w},onFreeze:function(t){return f&&l.NEED&&s(t)&&!o(t,r)&&c(t),t}}},function(t,e,n){e.f=n(4)},function(t,e,n){var r=n(5),i=n(2),o=n(31),u=n(54),a=n(7).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:u.f(t)})}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(8);t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,n){t.exports={default:n(162),__esModule:!0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s(n(11)),i=s(n(0)),o=s(n(1)),u=s(n(12)),a=s(n(13));function s(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(){(0,i.default)(this,e);var t=(0,u.default)(this,(e.__proto__||(0,r.default)(e)).call(this,"killable"));return t.dead=!1,t.deadTime=0,t.removeAfter=1,t}return(0,a.default)(e,t),(0,o.default)(e,[{key:"kill",value:function(){var t=this;this.queue(function(){return t.dead=!0})}},{key:"revive",value:function(){this.dead=!1,this.deadTime=0}},{key:"update",value:function(t,e,n){this.dead&&(this.deadTime+=e,this.deadTime>this.removeAfter&&this.queue(function(){n.entities.delete(t)}))}}]),e}(n(6).Trait);e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=f(n(11)),i=f(n(0)),o=f(n(1)),u=f(n(12)),a=f(n(13)),s=n(6);function f(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(){(0,i.default)(this,e);var t=(0,u.default)(this,(e.__proto__||(0,r.default)(e)).call(this,"solid"));return t.obstructs=!0,t}return(0,a.default)(e,t),(0,o.default)(e,[{key:"obstruct",value:function(t,e,n){this.obstructs&&(e===s.Sides.BOTTOM?(t.bounds.top=n.y1-t.size.y,t.vel.y=0):e===s.Sides.TOP?(t.bounds.top=n.y2,t.vel.y=0):e===s.Sides.LEFT?(t.bounds.left=n.x1-t.size.x,t.vel.x=0):e===s.Sides.RIGHT&&(t.bounds.left=n.x2,t.vel.x=0))}}]),e}(s.Trait);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s(n(11)),i=s(n(0)),o=s(n(1)),u=s(n(12)),a=s(n(13));function s(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(){return(0,i.default)(this,e),(0,u.default)(this,(e.__proto__||(0,r.default)(e)).call(this,"physics"))}return(0,a.default)(e,t),(0,o.default)(e,[{key:"update",value:function(t,e,n){t.pos.x+=t.vel.x*e,n.tileCollider.checkX(t),t.pos.y+=t.vel.y*e,n.tileCollider.checkY(t),t.vel.y+=n.gravity*e}}]),e}(n(6).Trait);e.default=f},function(t,e,n){t.exports=n(95)},function(t,e,n){t.exports=!n(10)&&!n(18)(function(){return 7!=Object.defineProperty(n(41)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){t.exports=n(15)},function(t,e,n){var r=n(17),i=n(20),o=n(101)(!1),u=n(44)("IE_PROTO");t.exports=function(t,e){var n,a=i(t),s=0,f=[];for(n in a)n!=u&&r(a,n)&&f.push(n);for(;e.length>s;)r(a,n=e[s++])&&(~o(f,n)||f.push(n));return f}},function(t,e,n){var r=n(25);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){var r=n(5).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(17),i=n(35),o=n(44)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var r=n(9);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},function(t,e,n){var r=n(19),i=n(4)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,e,n){var r=n(9),i=n(23),o=n(4)("species");t.exports=function(t,e){var n,u=r(t).constructor;return void 0===u||void 0==(n=r(u)[o])?e:i(n)}},function(t,e,n){var r,i,o,u=n(14),a=n(106),s=n(67),f=n(41),c=n(5),l=c.process,d=c.setImmediate,h=c.clearImmediate,p=c.MessageChannel,v=c.Dispatch,y=0,_={},m=function(){var t=+this;if(_.hasOwnProperty(t)){var e=_[t];delete _[t],e()}},b=function(t){m.call(t.data)};d&&h||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return _[++y]=function(){a("function"==typeof t?t:Function(t),e)},r(y),y},h=function(t){delete _[t]},"process"==n(25)(l)?r=function(t){l.nextTick(u(m,t,1))}:v&&v.now?r=function(t){v.now(u(m,t,1))}:p?(o=(i=new p).port2,i.port1.onmessage=b,r=u(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(t){c.postMessage(t+"","*")},c.addEventListener("message",b,!1)):r="onreadystatechange"in f("script")?function(t){s.appendChild(f("script")).onreadystatechange=function(){s.removeChild(this),m.call(t)}}:function(t){setTimeout(u(m,t,1),0)}),t.exports={set:d,clear:h}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var r=n(9),i=n(8),o=n(49);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){"use strict";var r=n(5),i=n(2),o=n(7),u=n(10),a=n(4)("species");t.exports=function(t){var e="function"==typeof i[t]?i[t]:r[t];u&&e&&!e[a]&&o.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r=n(4)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],u=o[r]();u.next=function(){return{done:n=!0}},o[r]=function(){return u},t(o)}catch(t){}return n}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(25);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(65),i=n(46).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){var r=n(56),i=n(24),o=n(20),u=n(42),a=n(17),s=n(63),f=Object.getOwnPropertyDescriptor;e.f=n(10)?f:function(t,e){if(t=o(t),e=u(e,!0),s)try{return f(t,e)}catch(t){}if(a(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e,n){"use strict";e.__esModule=!0;var r=u(n(134)),i=u(n(52)),o="function"==typeof i.default&&"symbol"==typeof r.default?function(t){return typeof t}:function(t){return t&&"function"==typeof i.default&&t.constructor===i.default&&t!==i.default.prototype?"symbol":typeof t};function u(t){return t&&t.__esModule?t:{default:t}}e.default="function"==typeof i.default&&"symbol"===o(r.default)?function(t){return void 0===t?"undefined":o(t)}:function(t){return t&&"function"==typeof i.default&&t.constructor===i.default&&t!==i.default.prototype?"symbol":void 0===t?"undefined":o(t)}},function(t,e,n){"use strict";var r=n(7).f,i=n(32),o=n(50),u=n(14),a=n(47),s=n(27),f=n(40),c=n(69),l=n(76),d=n(10),h=n(53).fastKey,p=n(57),v=d?"_s":"size",y=function(t,e){var n,r=h(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,f){var c=t(function(t,r){a(t,c,e,"_i"),t._t=e,t._i=i(null),t._f=void 0,t._l=void 0,t[v]=0,void 0!=r&&s(r,n,t[f],t)});return o(c.prototype,{clear:function(){for(var t=p(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[v]=0},delete:function(t){var n=p(this,e),r=y(n,t);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[v]--}return!!r},forEach:function(t){p(this,e);for(var n,r=u(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!y(p(this,e),t)}}),d&&r(c.prototype,"size",{get:function(){return p(this,e)[v]}}),c},def:function(t,e,n){var r,i,o=y(t,e);return o?o.v=n:(t._l=o={i:i=h(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[v]++,"F"!==i&&(t._i[i]=o)),t},getEntry:y,setStrong:function(t,e,n){f(t,e,function(t,n){this._t=p(t,e),this._k=n,this._l=void 0},function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?c(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,c(1))},n?"entries":"values",!n,!0),l(e)}}},function(t,e,n){"use strict";var r=n(5),i=n(3),o=n(53),u=n(18),a=n(15),s=n(50),f=n(27),c=n(47),l=n(8),d=n(26),h=n(7).f,p=n(148)(0),v=n(10);t.exports=function(t,e,n,y,_,m){var b=r[t],g=b,w=_?"set":"add",x=g&&g.prototype,k={};return v&&"function"==typeof g&&(m||x.forEach&&!u(function(){(new g).entries().next()}))?(g=e(function(e,n){c(e,g,t,"_c"),e._c=new b,void 0!=n&&f(n,_,e[w],e)}),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in x&&(!m||"clear"!=t)&&a(g.prototype,t,function(n,r){if(c(this,g,t),!e&&m&&!l(n))return"get"==t&&void 0;var i=this._c[t](0===n?0:n,r);return e?this:i})}),m||h(g.prototype,"size",{get:function(){return this._c.size}})):(g=y.getConstructor(e,t,_,w),s(g.prototype,n),o.NEED=!0),d(g,t),k[t]=g,i(i.G+i.W+i.F,k),m||y.setStrong(g,t,_),g}},function(t,e,n){var r=n(36),i=n(152);t.exports=function(t){return function(){if(r(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},function(t,e,n){"use strict";var r=n(3);t.exports=function(t){r(r.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,n){"use strict";var r=n(3),i=n(23),o=n(14),u=n(27);t.exports=function(t){r(r.S,t,{from:function(t){var e,n,r,a,s=arguments[1];return i(this),(e=void 0!==s)&&i(s),void 0==t?new this:(n=[],e?(r=0,a=o(s,arguments[2],2),u(t,!1,function(t){n.push(a(t,r++))})):u(t,!1,n.push,n),new this(n))}})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(0)),i=o(n(1));function o(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;(0,r.default)(this,t),this.matrix=e,this.tileSize=n}return(0,i.default)(t,[{key:"toIndex",value:function(t){return Math.floor(t/this.tileSize)}},{key:"toIndexRange",value:function(t,e){var n=Math.ceil(e/this.tileSize)*this.tileSize,r=[],i=t;do{r.push(this.toIndex(i)),i+=this.tileSize}while(i<n);return r}},{key:"getByIndex",value:function(t,e){var n=this.matrix.get(t,e),r=t*this.tileSize,i=r+this.tileSize,o=e*this.tileSize,u=o+this.tileSize;if(n)return{tile:n,x1:r,x2:i,y1:o,y2:u}}},{key:"searchByPosition",value:function(t,e){return this.getByIndex(this.toIndex(t),this.toIndex(e))}},{key:"searchByRange",value:function(t,e,n,r){var i=this,o=[];return this.toIndexRange(t,e).forEach(function(t){i.toIndexRange(n,r).forEach(function(e){var n=i.getByIndex(t,e);n&&o.push(n)})}),o}}]),t}();e.default=u},function(t,e,n){"use strict";e.__esModule=!0;var r,i=n(158),o=(r=i)&&r.__esModule?r:{default:r};e.default=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,o.default)(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=u(n(58)),i=u(n(0)),o=u(n(1));function u(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(e,n,o){(0,i.default)(this,t),this.image=e,this.width=n,this.height=o,this.tiles=new r.default,this.animations=new r.default}return(0,o.default)(t,[{key:"defineAnim",value:function(t,e){this.animations.set(t,e)}},{key:"define",value:function(t,e,n,r,i){var o=this,u=[!1,!0].map(function(t){var u=document.createElement("canvas");u.width=r,u.height=i;var a=u.getContext("2d");return t&&(a.scale(-1,1),a.translate(-r,0)),a.drawImage(o.image,e,n,r,i,0,0,r,i),u});this.tiles.set(t,u)}},{key:"defineTile",value:function(t,e,n){this.define(t,e*this.width,n*this.height,this.width,this.height)}},{key:"draw",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this.tiles.get(t)[i?1:0];e.drawImage(o,n,r)}},{key:"drawTile",value:function(t,e,n,r){this.draw(t,e,n*this.width,r*this.height)}},{key:"drawAnim",value:function(t,e,n,r,i){var o=this.animations.get(t);this.drawTile(o(i),e,n,r)}}]),t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=f(n(11)),i=f(n(0)),o=f(n(1)),u=f(n(12)),a=f(n(13)),s=n(6);function f(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(){(0,i.default)(this,e);var t=(0,u.default)(this,(e.__proto__||(0,r.default)(e)).call(this,"pendulumMove"));return t.enable=!0,t.speed=-30,t}return(0,a.default)(e,t),(0,o.default)(e,[{key:"obstruct",value:function(t,e){e!==s.Sides.LEFT&&e!==s.Sides.RIGHT||(this.speed=-this.speed)}},{key:"update",value:function(t,e){t.lifeTime+=e,this.enable&&(t.vel.x=this.speed)}}]),e}(s.Trait);e.default=c},function(t,e,n){n(93),t.exports=n(94)},function(t,e){!function(t){"use strict";if(!t.fetch){var e={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(e.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=function(t){return t&&DataView.prototype.isPrototypeOf(t)},i=ArrayBuffer.isView||function(t){return t&&n.indexOf(Object.prototype.toString.call(t))>-1};c.prototype.append=function(t,e){t=a(t),e=s(e);var n=this.map[t];this.map[t]=n?n+","+e:e},c.prototype.delete=function(t){delete this.map[a(t)]},c.prototype.get=function(t){return t=a(t),this.has(t)?this.map[t]:null},c.prototype.has=function(t){return this.map.hasOwnProperty(a(t))},c.prototype.set=function(t,e){this.map[a(t)]=s(e)},c.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},c.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),f(t)},c.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),f(t)},c.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),f(t)},e.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var o=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},v.call(y.prototype),v.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},m.error=function(){var t=new m(null,{status:0,statusText:""});return t.type="error",t};var u=[301,302,303,307,308];m.redirect=function(t,e){if(-1===u.indexOf(e))throw new RangeError("Invalid status code");return new m(null,{status:e,headers:{location:t}})},t.Headers=c,t.Request=y,t.Response=m,t.fetch=function(t,n){return new Promise(function(r,i){var o=new y(t,n),u=new XMLHttpRequest;u.onload=function(){var t,e,n={status:u.status,statusText:u.statusText,headers:(t=u.getAllResponseHeaders()||"",e=new c,t.split(/\r?\n/).forEach(function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}}),e)};n.url="responseURL"in u?u.responseURL:n.headers.get("X-Request-URL");var i="response"in u?u.response:u.responseText;r(new m(i,n))},u.onerror=function(){i(new TypeError("Network request failed"))},u.ontimeout=function(){i(new TypeError("Network request failed"))},u.open(o.method,o.url,!0),"include"===o.credentials&&(u.withCredentials=!0),"responseType"in u&&e.blob&&(u.responseType="blob"),o.headers.forEach(function(t,e){u.setRequestHeader(e,t)}),u.send(void 0===o._bodyInit?null:o._bodyInit)})},t.fetch.polyfill=!0}function a(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function s(t){return"string"!=typeof t&&(t=String(t)),t}function f(t){var n={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e.iterable&&(n[Symbol.iterator]=function(){return n}),n}function c(t){this.map={},t instanceof c?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function l(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function d(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function h(t){var e=new FileReader,n=d(e);return e.readAsArrayBuffer(t),n}function p(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(e.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(e.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(e.arrayBuffer&&e.blob&&r(t))this._bodyArrayBuffer=p(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!e.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!i(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=p(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},e.blob&&(this.blob=function(){var t=l(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?l(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(h)}),this.text=function(){var t,e,n,r=l(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=d(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},e.formData&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}function y(t,e){var n,r,i=(e=e||{}).body;if(t instanceof y){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new c(t.headers)),this.method=t.method,this.mode=t.mode,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new c(e.headers)),this.method=(n=e.method||this.method||"GET",r=n.toUpperCase(),o.indexOf(r)>-1?r:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function _(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function m(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new c(e.headers),this.url=e.url||"",this._initBody(t)}}("undefined"!=typeof self?self:this)},function(t,e,n){"use strict";var r,i=b(n(62)),o=b(n(22)),u=b(n(28)),a=b(n(115)),s=(r=(0,a.default)(i.default.mark(function t(e){var n,r,a,s,l,d,b,w,x,k,S,M,O;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.getContext("2d"),t.next=3,o.default.all([(0,v.loadEntities)(),(0,p.loadFont)()]);case 3:return r=t.sent,a=(0,u.default)(r,2),s=a[0],l=a[1],t.next=9,(0,h.createLevelLoader)(s);case 9:return d=t.sent,t.next=12,d("1-1");case 12:b=t.sent,w=new c.default,(x=s.mario()).pos.set(64,192),b.entities.add(x),k=g(x),b.entities.add(k),b.comp.layers.push((0,y.createDashboardLayer)(l,k)),S=1/60,"Android"===(M=(0,m.getUserAgent)()).platform||"iOS"===M.platform?(0,_.setupTouchPad)(x):(0,_.setupKeyboard)(x).listenTo(window),(O=new f.default(S)).update=function(t){b.update(t),w.pos.x=Math.max(0,x.pos.x-100),b.comp.draw(n,w)},O.start();case 26:case"end":return t.stop()}},t,this)})),function(t){return r.apply(this,arguments)});n(116),n(117);var f=b(n(118)),c=b(n(122)),l=b(n(6)),d=b(n(130)),h=n(143),p=n(170),v=n(171),y=n(182),_=n(184),m=n(187);n(188),n(189);function b(t){return t&&t.__esModule?t:{default:t}}function g(t){var e=new l.default,n=new d.default;return n.setPlayer(t),e.addTrait(n),e}s(document.getElementById("screen"))},function(t,e,n){var r=function(){return this}()||Function("return this")(),i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=n(96),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(t){r.regeneratorRuntime=void 0}},function(t,e){!function(e){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag",f="object"==typeof t,c=e.regeneratorRuntime;if(c)f&&(t.exports=c);else{(c=e.regeneratorRuntime=f?t.exports:{}).wrap=g;var l="suspendedStart",d="suspendedYield",h="executing",p="completed",v={},y={};y[u]=function(){return this};var _=Object.getPrototypeOf,m=_&&_(_(A([])));m&&m!==r&&i.call(m,u)&&(y=m);var b=S.prototype=x.prototype=Object.create(y);k.prototype=b.constructor=S,S.constructor=k,S[s]=k.displayName="GeneratorFunction",c.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===k||"GeneratorFunction"===(e.displayName||e.name))},c.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,S):(t.__proto__=S,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(b),t},c.awrap=function(t){return{__await:t}},M(O.prototype),O.prototype[a]=function(){return this},c.AsyncIterator=O,c.async=function(t,e,n,r){var i=new O(g(t,e,n,r));return c.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},M(b),b[s]="Generator",b[u]=function(){return this},b.toString=function(){return"[object Generator]"},c.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},c.values=A,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,i){return a.type="throw",a.arg=t,e.next=r,i&&(e.method="next",e.arg=n),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var u=this.tryEntries[o],a=u.completion;if("root"===u.tryLoc)return r("end");if(u.tryLoc<=this.prev){var s=i.call(u,"catchLoc"),f=i.call(u,"finallyLoc");if(s&&f){if(this.prev<u.catchLoc)return r(u.catchLoc,!0);if(this.prev<u.finallyLoc)return r(u.finallyLoc)}else if(s){if(this.prev<u.catchLoc)return r(u.catchLoc,!0)}else{if(!f)throw new Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return r(u.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=t,u.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(u)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:A(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),v}}}function g(t,e,n,r){var i=e&&e.prototype instanceof x?e:x,o=Object.create(i.prototype),u=new j(r||[]);return o._invoke=function(t,e,n){var r=l;return function(i,o){if(r===h)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return L()}for(n.method=i,n.arg=o;;){var u=n.delegate;if(u){var a=T(u,n);if(a){if(a===v)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var s=w(t,e,n);if("normal"===s.type){if(r=n.done?p:d,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(t,n,u),o}function w(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function x(){}function k(){}function S(){}function M(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function O(t){var e;this._invoke=function(n,r){function o(){return new Promise(function(e,o){!function e(n,r,o,u){var a=w(t[n],t,r);if("throw"!==a.type){var s=a.arg,f=s.value;return f&&"object"==typeof f&&i.call(f,"__await")?Promise.resolve(f.__await).then(function(t){e("next",t,o,u)},function(t){e("throw",t,o,u)}):Promise.resolve(f).then(function(t){s.value=t,o(s)},u)}u(a.arg)}(n,r,e,o)})}return e=e?e.then(o,o):o()}}function T(t,e){var r=t.iterator[e.method];if(r===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,T(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=w(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,v;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,v):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function A(t){if(t){var e=t[u];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(i.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=n,e.done=!0,e};return o.next=o}}return{next:L}}function L(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},function(t,e,n){n(30),n(16),n(21),n(105),n(108),n(109),t.exports=n(2).Promise},function(t,e,n){var r=n(38),i=n(39);t.exports=function(t){return function(e,n){var o,u,a=String(i(e)),s=r(n),f=a.length;return s<0||s>=f?t?"":void 0:(o=a.charCodeAt(s))<55296||o>56319||s+1===f||(u=a.charCodeAt(s+1))<56320||u>57343?t?a.charAt(s):o:t?a.slice(s,s+2):u-56320+(o-55296<<10)+65536}}},function(t,e,n){"use strict";var r=n(32),i=n(24),o=n(26),u={};n(15)(u,n(4)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(u,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var r=n(7),i=n(9),o=n(43);t.exports=n(10)?Object.defineProperties:function(t,e){i(t);for(var n,u=o(e),a=u.length,s=0;a>s;)r.f(t,n=u[s++],e[n]);return t}},function(t,e,n){var r=n(20),i=n(33),o=n(102);t.exports=function(t){return function(e,n,u){var a,s=r(e),f=i(s.length),c=o(u,f);if(t&&n!=n){for(;f>c;)if((a=s[c++])!=a)return!0}else for(;f>c;c++)if((t||c in s)&&s[c]===n)return t||c||0;return!t&&-1}}},function(t,e,n){var r=n(38),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):o(t,e)}},function(t,e,n){"use strict";var r=n(104),i=n(69),o=n(19),u=n(20);t.exports=n(40)(Array,"Array",function(t,e){this._t=u(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(){}},function(t,e,n){"use strict";var r,i,o,u,a=n(31),s=n(5),f=n(14),c=n(36),l=n(3),d=n(8),h=n(23),p=n(47),v=n(27),y=n(72),_=n(73).set,m=n(107)(),b=n(49),g=n(74),w=n(75),x=s.TypeError,k=s.process,S=s.Promise,M="process"==c(k),O=function(){},T=i=b.f,E=!!function(){try{var t=S.resolve(1),e=(t.constructor={})[n(4)("species")]=function(t){t(O,O)};return(M||"function"==typeof PromiseRejectionEvent)&&t.then(O)instanceof e}catch(t){}}(),P=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},j=function(t,e){if(!t._n){t._n=!0;var n=t._c;m(function(){for(var r=t._v,i=1==t._s,o=0,u=function(e){var n,o,u=i?e.ok:e.fail,a=e.resolve,s=e.reject,f=e.domain;try{u?(i||(2==t._h&&I(t),t._h=1),!0===u?n=r:(f&&f.enter(),n=u(r),f&&f.exit()),n===e.promise?s(x("Promise-chain cycle")):(o=P(n))?o.call(n,a,s):a(n)):s(r)}catch(t){s(t)}};n.length>o;)u(n[o++]);t._c=[],t._n=!1,e&&!t._h&&A(t)})}},A=function(t){_.call(s,function(){var e,n,r,i=t._v,o=L(t);if(o&&(e=g(function(){M?k.emit("unhandledRejection",i,t):(n=s.onunhandledrejection)?n({promise:t,reason:i}):(r=s.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=M||L(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},L=function(t){return 1!==t._h&&0===(t._a||t._c).length},I=function(t){_.call(s,function(){var e;M?k.emit("rejectionHandled",t):(e=s.onrejectionhandled)&&e({promise:t,reason:t._v})})},B=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),j(e,!0))},F=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw x("Promise can't be resolved itself");(e=P(t))?m(function(){var r={_w:n,_d:!1};try{e.call(t,f(F,r,1),f(B,r,1))}catch(t){B.call(r,t)}}):(n._v=t,n._s=1,j(n,!1))}catch(t){B.call({_w:n,_d:!1},t)}}};E||(S=function(t){p(this,S,"Promise","_h"),h(t),r.call(this);try{t(f(F,this,1),f(B,this,1))}catch(t){B.call(this,t)}},(r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(50)(S.prototype,{then:function(t,e){var n=T(y(this,S));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=M?k.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&j(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r;this.promise=t,this.resolve=f(F,t,1),this.reject=f(B,t,1)},b.f=T=function(t){return t===S||t===u?new o(t):i(t)}),l(l.G+l.W+l.F*!E,{Promise:S}),n(26)(S,"Promise"),n(76)("Promise"),u=n(2).Promise,l(l.S+l.F*!E,"Promise",{reject:function(t){var e=T(this);return(0,e.reject)(t),e.promise}}),l(l.S+l.F*(a||!E),"Promise",{resolve:function(t){return w(a&&this===u?S:this,t)}}),l(l.S+l.F*!(E&&n(77)(function(t){S.all(t).catch(O)})),"Promise",{all:function(t){var e=this,n=T(e),r=n.resolve,i=n.reject,o=g(function(){var n=[],o=0,u=1;v(t,!1,function(t){var a=o++,s=!1;n.push(void 0),u++,e.resolve(t).then(function(t){s||(s=!0,n[a]=t,--u||r(n))},i)}),--u||r(n)});return o.e&&i(o.v),n.promise},race:function(t){var e=this,n=T(e),r=n.reject,i=g(function(){v(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(5),i=n(73).set,o=r.MutationObserver||r.WebKitMutationObserver,u=r.process,a=r.Promise,s="process"==n(25)(u);t.exports=function(){var t,e,n,f=function(){var r,i;for(s&&(r=u.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(s)n=function(){u.nextTick(f)};else if(!o||r.navigator&&r.navigator.standalone)if(a&&a.resolve){var c=a.resolve();n=function(){c.then(f)}}else n=function(){i.call(r,f)};else{var l=!0,d=document.createTextNode("");new o(f).observe(d,{characterData:!0}),n=function(){d.data=l=!l}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},function(t,e,n){"use strict";var r=n(3),i=n(2),o=n(5),u=n(72),a=n(75);r(r.P+r.R,"Promise",{finally:function(t){var e=u(this,i.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return a(e,t()).then(function(){return n})}:t,n?function(n){return a(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){"use strict";var r=n(3),i=n(49),o=n(74);r(r.S,"Promise",{try:function(t){var e=i.f(this),n=o(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){t.exports={default:n(111),__esModule:!0}},function(t,e,n){n(21),n(16),t.exports=n(112)},function(t,e,n){var r=n(36),i=n(4)("iterator"),o=n(19);t.exports=n(2).isIterable=function(t){var e=Object(t);return void 0!==e[i]||"@@iterator"in e||o.hasOwnProperty(r(e))}},function(t,e,n){n(21),n(16),t.exports=n(114)},function(t,e,n){var r=n(9),i=n(48);t.exports=n(2).getIterator=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},function(t,e,n){"use strict";e.__esModule=!0;var r,i=n(22),o=(r=i)&&r.__esModule?r:{default:r};e.default=function(t){return function(){var e=t.apply(this,arguments);return new o.default(function(t,n){return function r(i,u){try{var a=e[i](u),s=a.value}catch(t){return void n(t)}if(!a.done)return o.default.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}("next")})}}},function(t,e){},function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(0)),i=o(n(1));function o(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/60;(0,r.default)(this,t);var i=0,o=0;this.updateProxy=function(t){for((i+=(t-o)/1e3)>1&&(i=1);i>n;)e.update(n),i-=n;o=t,e.enqueue()}}return(0,i.default)(t,[{key:"enqueue",value:function(){requestAnimationFrame(this.updateProxy)}},{key:"start",value:function(){this.enqueue()}}]),t}();e.default=u},function(t,e,n){t.exports={default:n(120),__esModule:!0}},function(t,e,n){n(121);var r=n(2).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){var r=n(3);r(r.S+r.F*!n(10),"Object",{defineProperty:n(7).f})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(0),o=(r=i)&&r.__esModule?r:{default:r},u=n(37);e.default=function t(){(0,o.default)(this,t),this.pos=new u.Vec2(0,0),this.size=new u.Vec2(256,240)}},function(t,e,n){n(124),n(30),n(127),n(128),t.exports=n(2).Symbol},function(t,e,n){"use strict";var r=n(5),i=n(17),o=n(10),u=n(3),a=n(64),s=n(53).KEY,f=n(18),c=n(45),l=n(26),d=n(34),h=n(4),p=n(54),v=n(55),y=n(125),_=n(79),m=n(9),b=n(8),g=n(20),w=n(42),x=n(24),k=n(32),S=n(126),M=n(81),O=n(7),T=n(43),E=M.f,P=O.f,j=S.f,A=r.Symbol,L=r.JSON,I=L&&L.stringify,B=h("_hidden"),F=h("toPrimitive"),R={}.propertyIsEnumerable,C=c("symbol-registry"),N=c("symbols"),z=c("op-symbols"),D=Object.prototype,U="function"==typeof A,G=r.QObject,q=!G||!G.prototype||!G.prototype.findChild,H=o&&f(function(){return 7!=k(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=E(D,e);r&&delete D[e],P(t,e,n),r&&t!==D&&P(D,e,r)}:P,V=function(t){var e=N[t]=k(A.prototype);return e._k=t,e},K=U&&"symbol"==typeof A.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof A},W=function(t,e,n){return t===D&&W(z,e,n),m(t),e=w(e,!0),m(n),i(N,e)?(n.enumerable?(i(t,B)&&t[B][e]&&(t[B][e]=!1),n=k(n,{enumerable:x(0,!1)})):(i(t,B)||P(t,B,x(1,{})),t[B][e]=!0),H(t,e,n)):P(t,e,n)},J=function(t,e){m(t);for(var n,r=y(e=g(e)),i=0,o=r.length;o>i;)W(t,n=r[i++],e[n]);return t},Y=function(t){var e=R.call(this,t=w(t,!0));return!(this===D&&i(N,t)&&!i(z,t))&&(!(e||!i(this,t)||!i(N,t)||i(this,B)&&this[B][t])||e)},X=function(t,e){if(t=g(t),e=w(e,!0),t!==D||!i(N,e)||i(z,e)){var n=E(t,e);return!n||!i(N,e)||i(t,B)&&t[B][e]||(n.enumerable=!0),n}},Q=function(t){for(var e,n=j(g(t)),r=[],o=0;n.length>o;)i(N,e=n[o++])||e==B||e==s||r.push(e);return r},$=function(t){for(var e,n=t===D,r=j(n?z:g(t)),o=[],u=0;r.length>u;)!i(N,e=r[u++])||n&&!i(D,e)||o.push(N[e]);return o};U||(a((A=function(){if(this instanceof A)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(n){this===D&&e.call(z,n),i(this,B)&&i(this[B],t)&&(this[B][t]=!1),H(this,t,x(1,n))};return o&&q&&H(D,t,{configurable:!0,set:e}),V(t)}).prototype,"toString",function(){return this._k}),M.f=X,O.f=W,n(80).f=S.f=Q,n(56).f=Y,n(78).f=$,o&&!n(31)&&a(D,"propertyIsEnumerable",Y,!0),p.f=function(t){return V(h(t))}),u(u.G+u.W+u.F*!U,{Symbol:A});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;Z.length>tt;)h(Z[tt++]);for(var et=T(h.store),nt=0;et.length>nt;)v(et[nt++]);u(u.S+u.F*!U,"Symbol",{for:function(t){return i(C,t+="")?C[t]:C[t]=A(t)},keyFor:function(t){if(!K(t))throw TypeError(t+" is not a symbol!");for(var e in C)if(C[e]===t)return e},useSetter:function(){q=!0},useSimple:function(){q=!1}}),u(u.S+u.F*!U,"Object",{create:function(t,e){return void 0===e?k(t):J(k(t),e)},defineProperty:W,defineProperties:J,getOwnPropertyDescriptor:X,getOwnPropertyNames:Q,getOwnPropertySymbols:$}),L&&u(u.S+u.F*(!U||f(function(){var t=A();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(b(e)||void 0!==t)&&!K(t))return _(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!K(e))return e}),r[1]=e,I.apply(L,r)}}),A.prototype[F]||n(15)(A.prototype,F,A.prototype.valueOf),l(A,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},function(t,e,n){var r=n(43),i=n(78),o=n(56);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var u,a=n(t),s=o.f,f=0;a.length>f;)s.call(t,u=a[f++])&&e.push(u);return e}},function(t,e,n){var r=n(20),i=n(80).f,o={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return u&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return u.slice()}}(t):i(r(t))}},function(t,e,n){n(55)("asyncIterator")},function(t,e,n){n(55)("observable")},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(0)),i=o(n(1));function o(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e,n,i){(0,r.default)(this,t),this.pos=e,this.size=n,this.offset=i}return(0,i.default)(t,[{key:"overlaps",value:function(t){return this.bottom>t.top&&this.top<t.bottom&&this.left<t.right&&this.right>t.left}},{key:"bottom",get:function(){return this.pos.y+this.size.y+this.offset.y},set:function(t){this.pos.y=t-(this.size.y+this.offset.y)}},{key:"top",get:function(){return this.pos.y+this.offset.y},set:function(t){this.pos.y=t-this.offset.y}},{key:"left",get:function(){return this.pos.x+this.offset.x},set:function(t){this.pos.x=t-this.offset.x}},{key:"right",get:function(){return this.pos.x+this.size.x+this.offset.x},set:function(t){this.pos.x=t-(this.size.x+this.offset.x)}}]),t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=c(n(11)),i=c(n(0)),o=c(n(1)),u=c(n(12)),a=c(n(13)),s=n(6),f=n(37);function c(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(){(0,i.default)(this,e);var t=(0,u.default)(this,(e.__proto__||(0,r.default)(e)).call(this,"playerController"));return t.player=null,t.checkPoint=new f.Vec2(64,192),t.time=300,t.score=0,t}return(0,a.default)(e,t),(0,o.default)(e,[{key:"setPlayer",value:function(t){var e=this;this.player=t,this.player.stomer.onStomp=function(){e.score+=100}}},{key:"update",value:function(t,e,n){n.entities.has(this.player)?this.time-=2*e:(this.player.killable.revive(),this.player.pos.set(this.checkPoint.x,this.checkPoint.y),n.entities.add(this.player))}}]),e}(s.Trait);e.default=l},function(t,e,n){n(132),t.exports=n(2).Object.getPrototypeOf},function(t,e,n){var r=n(35),i=n(68);n(133)("getPrototypeOf",function(){return function(t){return i(r(t))}})},function(t,e,n){var r=n(3),i=n(2),o=n(18);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],u={};u[t]=e(n),r(r.S+r.F*o(function(){n(1)}),"Object",u)}},function(t,e,n){t.exports={default:n(135),__esModule:!0}},function(t,e,n){n(16),n(21),t.exports=n(54).f("iterator")},function(t,e,n){t.exports={default:n(137),__esModule:!0}},function(t,e,n){n(138),t.exports=n(2).Object.setPrototypeOf},function(t,e,n){var r=n(3);r(r.S,"Object",{setPrototypeOf:n(139).set})},function(t,e,n){var r=n(8),i=n(9),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=n(14)(Function.call,n(81).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},function(t,e,n){t.exports={default:n(141),__esModule:!0}},function(t,e,n){n(142);var r=n(2).Object;t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){var r=n(3);r(r.S,"Object",{create:n(32)})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=d(n(62)),i=d(n(51)),o=d(n(22)),u=d(n(28));e.createLevelLoader=function(t){return function(e){return(0,f.loadJSON)("../assets/levels/"+e+".json").then(function(t){return o.default.all([t,(0,f.loadSpriteSheet)(t.spriteSheet)])}).then(function(e){var n=(0,u.default)(e,2),r=n[0],o=n[1],f=new s.default;return function(t,e){var n=function(t,e){var n=new a.Matrix,r=!0,o=!1,u=void 0;try{for(var s,f=(0,i.default)(b(t,e));!(r=(s=f.next()).done);r=!0){var c=s.value,l=c.tile,d=c.x,h=c.y;n.set(d,h,{type:l.type})}}catch(t){o=!0,u=t}finally{try{!r&&f.return&&f.return()}finally{if(o)throw u}}return n}(t.layers.reduce(function(t,e){return t.concat(e.tiles)},[]),t.patterns);e.setCollisionGrid(n)}(r,f),function(t,e,n){t.layers.forEach(function(r){var o=function(t,e){var n=new a.Matrix,r=!0,o=!1,u=void 0;try{for(var s,f=(0,i.default)(b(t,e));!(r=(s=f.next()).done);r=!0){var c=s.value,l=c.tile,d=c.x,h=c.y;n.set(d,h,{name:l.name})}}catch(t){o=!0,u=t}finally{try{!r&&f.return&&f.return()}finally{if(o)throw u}}return n}(r.tiles,t.patterns),u=(0,l.createBackgroundLayer)(e,o,n);e.comp.layers.push(u)})}(r,f,o),function(t,e,n){t.entities.forEach(function(t){var r=t.name,i=t.positions;i.forEach(function(t){var i=(0,u.default)(t,2),o=i[0],a=i[1],s=n[r],f=s();f.pos.set(16*o,16*a),e.entities.add(f)})});var r=(0,c.createSpriteLayer)(e.entities);e.comp.layers.push(r)}(r,f,t),f})}};var a=n(37),s=d(n(144)),f=n(29),c=n(168),l=n(169);function d(t){return t&&t.__esModule?t:{default:t}}var h=r.default.mark(y),p=r.default.mark(m),v=r.default.mark(b);function y(t,e,n,i){var o,u,a,s;return r.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:o=t+e,u=n+i,a=t;case 3:if(!(a<o)){r.next=14;break}s=n;case 5:if(!(s<u)){r.next=11;break}return r.next=8,{x:a,y:s};case 8:s++,r.next=5;break;case 11:a++,r.next=3;break;case 14:case"end":return r.stop()}},h,this)}function _(t){if(4===t.length){var e=(0,u.default)(t,4);return y(e[0],e[1],e[2],e[3])}if(3===t.length){var n=(0,u.default)(t,3);return y(n[0],n[1],n[2],1)}if(2===t.length){var r=(0,u.default)(t,2);return y(r[0],1,r[1],1)}}function m(t){var e,n,o,u,a,s;return r.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:e=!0,n=!1,o=void 0,r.prev=3,u=(0,i.default)(t);case 5:if(e=(a=u.next()).done){r.next=11;break}return s=a.value,r.delegateYield(_(s),"t0",8);case 8:e=!0,r.next=5;break;case 11:r.next=17;break;case 13:r.prev=13,r.t1=r.catch(3),n=!0,o=r.t1;case 17:r.prev=17,r.prev=18,!e&&u.return&&u.return();case 20:if(r.prev=20,!n){r.next=23;break}throw o;case 23:return r.finish(20);case 24:return r.finish(17);case 25:case"end":return r.stop()}},p,this,[[3,13,17,25],[18,,20,24]])}function b(t,e){var n,o;return r.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o=function t(o,u,a){var s,f,c,l,d,h,p,v,y,_,b,g,w,x,k,S,M;return r.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:s=!0,f=!1,c=void 0,n.prev=3,l=(0,i.default)(o);case 5:if(s=(d=l.next()).done){n.next=45;break}h=d.value,p=!0,v=!1,y=void 0,n.prev=10,_=(0,i.default)(m(h.ranges));case 12:if(p=(b=_.next()).done){n.next=28;break}if(g=b.value,w=g.x,x=g.y,k=w+u,S=x+a,!h.pattern){n.next=23;break}return M=e[h.pattern].tiles,n.delegateYield(t(M,k,S),"t0",21);case 21:n.next=25;break;case 23:return n.next=25,{tile:h,x:k,y:S};case 25:p=!0,n.next=12;break;case 28:n.next=34;break;case 30:n.prev=30,n.t1=n.catch(10),v=!0,y=n.t1;case 34:n.prev=34,n.prev=35,!p&&_.return&&_.return();case 37:if(n.prev=37,!v){n.next=40;break}throw y;case 40:return n.finish(37);case 41:return n.finish(34);case 42:s=!0,n.next=5;break;case 45:n.next=51;break;case 47:n.prev=47,n.t2=n.catch(3),f=!0,c=n.t2;case 51:n.prev=51,n.prev=52,!s&&l.return&&l.return();case 54:if(n.prev=54,!f){n.next=57;break}throw c;case 57:return n.finish(54);case 58:return n.finish(51);case 59:case"end":return n.stop()}},n,this,[[3,47,51,59],[10,30,34,42],[35,,37,41],[52,,54,58]])},n=r.default.mark(o),u.delegateYield(o(t,0,0),"t0",3);case 3:case"end":return u.stop()}},v,this)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=f(n(145)),i=f(n(0)),o=f(n(1)),u=f(n(155)),a=f(n(156)),s=f(n(157));function f(t){return t&&t.__esModule?t:{default:t}}var c=function(){function t(){(0,i.default)(this,t),this.gravity=1500,this.comp=new u.default,this.entities=new r.default,this.entityCollider=new a.default(this.entities),this.totalTime=0,this.tileCollider=null}return(0,o.default)(t,[{key:"setCollisionGrid",value:function(t){this.tileCollider=new s.default(t)}},{key:"update",value:function(t){var e=this;this.entities.forEach(function(n){n.update(t,e)}),this.entities.forEach(function(t){t.finalize(),e.entityCollider.check(t)}),this.totalTime+=t}}]),t}();e.default=c},function(t,e,n){t.exports={default:n(146),__esModule:!0}},function(t,e,n){n(30),n(16),n(21),n(147),n(151),n(153),n(154),t.exports=n(2).Set},function(t,e,n){"use strict";var r=n(83),i=n(57);t.exports=n(84)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(i(this,"Set"),t=0===t?0:t,t)}},r)},function(t,e,n){var r=n(14),i=n(66),o=n(35),u=n(33),a=n(149);t.exports=function(t,e){var n=1==t,s=2==t,f=3==t,c=4==t,l=6==t,d=5==t||l,h=e||a;return function(e,a,p){for(var v,y,_=o(e),m=i(_),b=r(a,p,3),g=u(m.length),w=0,x=n?h(e,g):s?h(e,0):void 0;g>w;w++)if((d||w in m)&&(y=b(v=m[w],w,_),t))if(n)x[w]=y;else if(y)switch(t){case 3:return!0;case 5:return v;case 6:return w;case 2:x.push(v)}else if(c)return!1;return l?-1:f||c?c:x}}},function(t,e,n){var r=n(150);t.exports=function(t,e){return new(r(t))(e)}},function(t,e,n){var r=n(8),i=n(79),o=n(4)("species");t.exports=function(t){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){var r=n(3);r(r.P+r.R,"Set",{toJSON:n(85)("Set")})},function(t,e,n){var r=n(27);t.exports=function(t,e){var n=[];return r(t,!1,n.push,n,e),n}},function(t,e,n){n(86)("Set")},function(t,e,n){n(87)("Set")},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(0)),i=o(n(1));function o(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(){(0,r.default)(this,t),this.layers=[]}return(0,i.default)(t,[{key:"draw",value:function(t,e){this.layers.forEach(function(n){n(t,e)})}}]),t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(0)),i=o(n(1));function o(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e){(0,r.default)(this,t),this.entities=e}return(0,i.default)(t,[{key:"check",value:function(t){this.entities.forEach(function(e){t!==e&&t.bounds.overlaps(e.bounds)&&(t.collides(e),e.collides(t))})}}]),t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(n(0)),i=a(n(1)),o=a(n(88)),u=n(6);function a(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e){(0,r.default)(this,t),this.tile=new o.default(e)}return(0,i.default)(t,[{key:"checkX",value:function(t){if(t.vel.x>0)t.bounds.right;else{if(!(t.vel.x<0))return;t.bounds.left}this.tile.searchByRange(t.bounds.left,t.bounds.right,t.bounds.top,t.bounds.bottom).forEach(function(e){"death-border"===e.tile.type&&t.killable.kill(),"ground"===e.tile.type&&(t.vel.x>0?t.bounds.right>e.x1&&t.obstruct(u.Sides.LEFT,e):t.vel.x<0&&t.bounds.left<e.x2&&t.obstruct(u.Sides.RIGHT,e))})}},{key:"checkY",value:function(t){if(t.vel.y>0)t.bounds.bottom;else{if(!(t.vel.y<0))return;t.bounds.top}this.tile.searchByRange(t.bounds.left,t.bounds.right,t.bounds.top,t.bounds.bottom).forEach(function(e){"death-border"===e.tile.type&&t.killable.kill(),"ground"===e.tile.type&&(t.vel.y>0?t.bounds.bottom>e.y1&&t.obstruct(u.Sides.BOTTOM,e):t.vel.y<0&&t.pos.y<e.y2&&t.obstruct(u.Sides.TOP,e))})}}]),t}();e.default=s},function(t,e,n){t.exports={default:n(159),__esModule:!0}},function(t,e,n){n(16),n(160),t.exports=n(2).Array.from},function(t,e,n){"use strict";var r=n(14),i=n(3),o=n(35),u=n(70),a=n(71),s=n(33),f=n(161),c=n(48);i(i.S+i.F*!n(77)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,i,l,d=o(t),h="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,y=void 0!==v,_=0,m=c(d);if(y&&(v=r(v,p>2?arguments[2]:void 0,2)),void 0==m||h==Array&&a(m))for(n=new h(e=s(d.length));e>_;_++)f(n,_,y?v(d[_],_):d[_]);else for(l=m.call(d),n=new h;!(i=l.next()).done;_++)f(n,_,y?u(l,v,[i.value,_],!0):i.value);return n.length=_,n}})},function(t,e,n){"use strict";var r=n(7),i=n(24);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},function(t,e,n){n(30),n(16),n(21),n(163),n(164),n(165),n(166),t.exports=n(2).Map},function(t,e,n){"use strict";var r=n(83),i=n(57);t.exports=n(84)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=r.getEntry(i(this,"Map"),t);return e&&e.v},set:function(t,e){return r.def(i(this,"Map"),0===t?0:t,e)}},r,!0)},function(t,e,n){var r=n(3);r(r.P+r.R,"Map",{toJSON:n(85)("Map")})},function(t,e,n){n(86)("Map")},function(t,e,n){n(87)("Map")},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createAnim=function(t,e){return function(n){var r=Math.floor(n/e)%t.length;return t[r]}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createSpriteLayer=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,r=document.createElement("canvas");r.width=e,r.height=n;var i=r.getContext("2d");return function(o,u){t.forEach(function(t){i.clearRect(0,0,e,n),t.draw(i),o.drawImage(r,t.pos.x-u.pos.x,t.pos.y-u.pos.y)})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createBackgroundLayer=function(t,e,n){var r=new o.default(e),i=document.createElement("canvas");i.width=272,i.height=240;var u=i.getContext("2d");function a(r,o){u.clearRect(0,0,i.width,i.height);for(var a=function(i){var o=e.grid[i];o&&o.forEach(function(e,o){n.animations.has(e.name)?n.drawAnim(e.name,u,i-r,o,t.totalTime):n.drawTile(e.name,u,i-r,o)})},s=r;s<=o;s++)a(s)}return function(t,e){var n=r.toIndex(e.size.x),o=r.toIndex(e.pos.x),u=o+n;a(o,u),t.drawImage(i,-e.pos.x%16,-e.pos.y)}};var r,i=n(88),o=(r=i)&&r.__esModule?r:{default:r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=c(n(51)),i=c(n(28)),o=c(n(89)),u=c(n(0)),a=c(n(1));e.loadFont=function(){return(0,s.loadImage)("./assets/img/font.png").then(function(t){var e=new f.default(t),n=t.width,u=t.width/8,a=!0,s=!1,c=void 0;try{for(var h,p=(0,r.default)([].concat((0,o.default)(l)).entries());!(a=(h=p.next()).done);a=!0){var v=h.value,y=(0,i.default)(v,2),_=y[0],m=y[1],b=8*_%n,g=8*Math.floor(_/u);e.define(m,b,g,8,8)}}catch(t){s=!0,c=t}finally{try{!a&&p.return&&p.return()}finally{if(s)throw c}}return new d(e,8)})};var s=n(29),f=c(n(90));function c(t){return t&&t.__esModule?t:{default:t}}var l=" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",d=function(){function t(e,n){(0,u.default)(this,t),this.sprites=e,this.size=n}return(0,a.default)(t,[{key:"print",value:function(t,e,n,r){var i=this;[].concat((0,o.default)(t)).forEach(function(t,o){i.sprites.draw(t,e,n+o*i.size,r)})}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(22),o=(r=i)&&r.__esModule?r:{default:r};e.loadEntities=function(){var t={};function e(e){return function(n){t[e]=n}}return o.default.all([(0,u.loadMario)().then(e("mario")),(0,a.loadGoomba)().then(e("goomba")),(0,s.loadKoopa)().then(e("koopa"))]).then(function(){return t})};var u=n(172),a=n(176),s=n(177)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loadMario=function(){return(0,c.loadSpriteSheet)("mario").then(d)};var r=l(n(6)),i=l(n(173)),o=l(n(174)),u=l(n(175)),a=l(n(59)),s=l(n(60)),f=l(n(61)),c=n(29);function l(t){return t&&t.__esModule?t:{default:t}}function d(t){var e=t.animations.get("run");function n(n){var r;t.draw((r=this).jump.falling?"jump":r.go.distance>0?r.vel.x>0&&r.go.dir<0||r.vel.x<0&&r.go.dir>0?"break":e(r.go.distance):"idle",n,0,0,this.go.heading<0)}return function(){var t=new r.default;return t.size.set(14,16),t.addTrait(new f.default),t.addTrait(new s.default),t.addTrait(new i.default),t.addTrait(new o.default),t.addTrait(new u.default),t.addTrait(new a.default),t.killable.removeAfter=0,t.draw=n,t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s(n(11)),i=s(n(0)),o=s(n(1)),u=s(n(12)),a=s(n(13));function s(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(){(0,i.default)(this,e);var t=(0,u.default)(this,(e.__proto__||(0,r.default)(e)).call(this,"go"));return t.dir=0,t.acceleration=400,t.deceleration=300,t.dragFactor=2e-4,t.distance=0,t.heading=1,t}return(0,a.default)(e,t),(0,o.default)(e,[{key:"update",value:function(t,e){var n=Math.abs(t.vel.x);if(0!==this.dir)t.vel.x+=this.acceleration*e*this.dir,t.jump&&t.jump.falling||(this.heading=this.dir);else if(0!==t.vel.x){var r=Math.min(n,this.deceleration*e);t.vel.x+=t.vel.x>0?-r:r}else this.distance=0;var i=this.dragFactor*t.vel.x*n;t.vel.x-=i,this.distance+=n*e}}]),e}(n(6).Trait);e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=f(n(11)),i=f(n(0)),o=f(n(1)),u=f(n(12)),a=f(n(13)),s=n(6);function f(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(){(0,i.default)(this,e);var t=(0,u.default)(this,(e.__proto__||(0,r.default)(e)).call(this,"jump"));return t.duration=.3,t.velocity=200,t.engageTime=0,t.ready=0,t.gracePeriod=.1,t.requestTime=0,t.speedBoost=.3,t}return(0,a.default)(e,t),(0,o.default)(e,[{key:"start",value:function(){this.requestTime=this.gracePeriod}},{key:"cancel",value:function(){this.engageTime=0,this.requestTime=0}},{key:"obstruct",value:function(t,e){e===s.Sides.BOTTOM?this.ready=1:e===s.Sides.TOP&&this.cancel()}},{key:"update",value:function(t,e){this.requestTime>0&&(this.ready>0&&(this.engageTime=this.duration,this.requestTime=0),this.requestTime-=e),this.engageTime>0&&(t.vel.y=-(this.velocity+Math.abs(t.vel.x)*this.speedBoost),this.engageTime-=e),this.ready--}},{key:"falling",get:function(){return this.ready<0}}]),e}(s.Trait);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s(n(11)),i=s(n(0)),o=s(n(1)),u=s(n(12)),a=s(n(13));function s(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(){(0,i.default)(this,e);var t=(0,u.default)(this,(e.__proto__||(0,r.default)(e)).call(this,"stomer"));return t.bounceSpeed=400,t.onStomp=function(){},t}return(0,a.default)(e,t),(0,o.default)(e,[{key:"bounce",value:function(t,e){t.bounds.bottom=e.bounds.top,t.vel.y=-this.bounceSpeed}},{key:"collides",value:function(t,e){e.killable&&!e.killable.dead&&t.vel.y>e.vel.y&&(this.bounce(t,e),this.onStomp(t,e))}}]),e}(n(6).Trait);e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=v(n(11)),i=v(n(0)),o=v(n(1)),u=v(n(12)),a=v(n(13));e.loadGoomba=function(){return(0,c.loadSpriteSheet)("goomba").then(_)};var s=n(6),f=v(s),c=n(29),l=v(n(91)),d=v(n(59)),h=v(n(60)),p=v(n(61));function v(t){return t&&t.__esModule?t:{default:t}}var y=function(t){function e(){return(0,i.default)(this,e),(0,u.default)(this,(e.__proto__||(0,r.default)(e)).call(this,"behavior"))}return(0,a.default)(e,t),(0,o.default)(e,[{key:"collides",value:function(t,e){t.killable.dead||e.stomer&&(e.vel.y>t.vel.y?(t.killable.kill(),t.pendulumMove.speed=0):e.killable.kill())}}]),e}(s.Trait);function _(t){var e=t.animations.get("walk");function n(n){var r;t.draw((r=this).killable.dead?"flat":e(r.lifeTime),n,0,0)}return function(){var t=new f.default;return t.size.set(16,16),t.addTrait(new p.default),t.addTrait(new h.default),t.addTrait(new l.default),t.addTrait(new y),t.addTrait(new d.default),t.draw=n,t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=_(n(178)),i=_(n(11)),o=_(n(0)),u=_(n(1)),a=_(n(12)),s=_(n(13)),f=_(n(52));e.loadKoopa=function(){return(0,d.loadSpriteSheet)("koopa").then(x)};var c=n(6),l=_(c),d=n(29),h=_(n(91)),p=_(n(60)),v=_(n(61)),y=_(n(59));function _(t){return t&&t.__esModule?t:{default:t}}var m=(0,f.default)("walking"),b=(0,f.default)("hiding"),g=(0,f.default)("panic"),w=function(t){function e(){(0,o.default)(this,e);var t=(0,a.default)(this,(e.__proto__||(0,i.default)(e)).call(this,"behavior"));return t.state=m,t.hideTime=0,t.hideDuration=3,t.panicSpeed=200,t.walkSpeed=null,t}return(0,s.default)(e,t),(0,u.default)(e,[{key:"collides",value:function(t,e){t.killable.dead||e.stomer&&(e.vel.y>t.vel.y?this.handleState(t,e):this.handleKick(t,e))}},{key:"handleKick",value:function(t,e){if(this.state===m)e.killable.kill();else if(this.state===b)this.panic(t,e);else if(this.state===g){var n=(0,r.default)(t.vel.x),i=(0,r.default)(t.pos.x-e.pos.x);0!==n&&i!==n&&e.killable.kill()}}},{key:"handleState",value:function(t,e){this.state===m?(0!==t.pendulumMove.speed&&(this.walkSpeed=t.pendulumMove.speed),this.hiding(t)):this.state===b?(t.killable.kill(),t.vel.set(100,-200),t.solid.obstructs=!1):this.state===g&&this.hiding(t)}},{key:"hiding",value:function(t){t.vel.x=0,t.pendulumMove.enable=!1,this.state=b}},{key:"unHide",value:function(t){t.vel.x=100,t.pendulumMove.enable=!0,t.pendulumMove.speed=this.walkSpeed,this.state=m,this.hideTime=0}},{key:"panic",value:function(t,e){t.pendulumMove.enable=!0,t.pendulumMove.speed=this.panicSpeed*(0,r.default)(e.vel.x),this.state=g}},{key:"update",value:function(t,e){this.state===b&&(this.hideTime+=e,this.hideTime>this.hideDuration&&this.unHide(t))}}]),e}(c.Trait);function x(t){var e=t.animations.get("walk"),n=t.animations.get("wake");function r(r){var i;t.draw((i=this).behavior.state===b?i.behavior.hideTime>2?n(i.behavior.hideTime):"hiding":i.behavior.state===g?"hiding":e(i.lifeTime),r,0,0,this.vel.x<0)}return function(){var t=new l.default;return t.size.set(16,16),t.offset.y=8,t.addTrait(new v.default),t.addTrait(new p.default),t.addTrait(new h.default),t.addTrait(new w),t.addTrait(new y.default),t.draw=r,t}}},function(t,e,n){t.exports={default:n(179),__esModule:!0}},function(t,e,n){n(180),t.exports=n(2).Math.sign},function(t,e,n){var r=n(3);r(r.S,"Math",{sign:n(181)})},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createDashboardLayer=function(t,e){var n=t.size,i=2*t.size;return(0,r.addPadStartPolyfill)(),function(r){var o=e.playerController.time,u=e.playerController.score;o<=0&&(e.playerController.time=o=300),t.print("MARIO",r,16,n),t.print(u.toString().padStart(6,"0"),r,16,i),t.print("@x"+99..toString().padStart(2,"0"),r,96,i),t.print("WORLD",r,152,n),t.print("1-1",r,160,i),t.print("TIME",r,208,n),t.print(o.toFixed().toString().padStart(3,"0"),r,216,i)}};var r=n(183)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.addPadStartPolyfill=function(){String.prototype.padStart||(String.prototype.padStart=function(t,e){return t>>=0,e=String(e||" "),this.length>t?String(this):((t-=this.length)>e.length&&(e+=e.repeat(t/e.length)),e.slice(0,t)+String(this))})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setupTouchPad=function(t){var e=document.getElementById("jump-btn"),n=document.getElementById("left-btn"),r=document.getElementById("right-btn"),o=[e,n,r],u=new i.default(o);u.startListenTo(),u.addMapping("jump-btn",function(e){e?t.jump.start():t.jump.cancel()}),u.addMapping("right-btn",function(e){t.go.dir+=e?1:-1}),u.addMapping("left-btn",function(e){t.go.dir+=e?-1:1})},e.setupKeyboard=function(t){var e=new r.default;return e.addMapping("Space",function(e){e?t.jump.start():t.jump.cancel()}),e.addMapping("ArrowUp",function(e){e?t.jump.start():t.jump.cancel()}),e.addMapping("ArrowRight",function(e){t.go.dir+=e?1:-1}),e.addMapping("ArrowLeft",function(e){t.go.dir+=e?-1:1}),e};var r=o(n(185)),i=o(n(186));function o(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=u(n(58)),i=u(n(0)),o=u(n(1));function u(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(){(0,i.default)(this,t),this.keyStates=new r.default,this.keyMap=new r.default}return(0,o.default)(t,[{key:"addMapping",value:function(t,e){this.keyMap.set(t,e)}},{key:"handleEvent",value:function(t){var e=t.code;if(this.keyMap.has(e)){t.preventDefault();var n="keydown"===t.type?1:0;this.keyStates.get(e)!==n&&(this.keyStates.set(e,n),this.keyMap.get(e)(n))}}},{key:"listenTo",value:function(t){var e=this;["keydown","keyup"].forEach(function(n){t.addEventListener(n,function(t){e.handleEvent(t)})})}}]),t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=u(n(58)),i=u(n(0)),o=u(n(1));function u(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(e){(0,i.default)(this,t),this.buttons=e,this.keyStates=new r.default,this.keyMap=new r.default}return(0,o.default)(t,[{key:"addMapping",value:function(t,e){this.keyMap.set(t,e)}},{key:"handleEvent",value:function(t){var e=t.currentTarget.id;if(this.keyMap.has(e)){t.preventDefault();var n="touchstart"===t.type||"mousedown"===t.type?1:0;this.keyStates.get(e)!==n&&(this.keyStates.set(e,n),this.keyMap.get(e)(n))}}},{key:"startListenTo",value:function(){var t=this;["touchstart","touchend","mousedown","mouseup"].forEach(function(e){t.buttons.forEach(function(n){n.addEventListener(e,function(e){t.handleEvent(e)})})})}}]),t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(28),o=(r=i)&&r.__esModule?r:{default:r};e.getUserAgent=function(){var t={},e=navigator.userAgent;try{var n=function(t){if(/windows/i.test(t))return["Windows",0];if(/android/i.test(t)){var e=t.match(/android\s([0-9\.]*)/i),n=e?parseFloat(e[1]):0;return["Android",n]}if(/iP(hone|od|ad)/.test(t)&&!window.MSStream){var r=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),i=r?parseInt(r[1],10):0;return["iOS",i]}if(t.indexOf("Mac")>-1)return["Mac",0];return["unknown",0]}(e),r=(0,o.default)(n,2);t.platform=r[0],t.ver=r[1]}catch(e){var i=["Windows",0];t.platform=i[0],t.ver=i[1]}return t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.autoPlayOniOS=function(){var t=document.getElementById("bgm");function e(){t.play()}window.addEventListener("touchstart",e),t.addEventListener("play",function(){window.removeEventListener("touchstart",e)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCollisionLayer=function(t){var e=(i=t.tileCollider,o=[],u=i.tile,a=u.tileSize,s=u.getByIndex,u.getByIndex=function(t,e){return o.push({x:t,y:e}),s.call(u,t,e)},function(t,e){t.strokeStyle="blue",o.forEach(function(n){var r=n.x,i=n.y;t.beginPath(),t.rect(r*a-e.pos.x,i*a-e.pos.y,a,a),t.stroke()}),o.length=0}),n=(r=t.entities,function(t,e){t.strokeStyle="red",r.forEach(function(n){t.beginPath(),t.rect(n.pos.x-e.pos.x,n.pos.y+n.offset.y-e.pos.y,n.size.x,n.size.y),t.stroke()})});var r;var i,o,u,a,s;return function(t,r){e(t,r),n(t,r)}}}]);